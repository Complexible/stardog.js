{"map":"{\"version\":3,\"file\":\"options.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../lib/db/options.ts\"],\"names\":[],\"mappings\":\"AAIA,OAAO,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAEtD,OAAO,IAAI,MAAM,MAAM,CAAC;AACxB,OAAO,MAAM,MAAM,cAAc,CAAC;AAElC,IAAM,oBAAoB,GAAG,kBAAkB,CAAC;IAC9C,QAAQ,EAAE,iBAAiB;IAC3B,kBAAkB,EAAE,EAAE;CACvB,CAAC,CAAC;AACH,IAAM,6BAA6B,GAAG,kBAAkB,CAAC;IACvD,QAAQ,EAAE,yBAAyB;IACnC,kBAAkB,EAAE,EAAE;CACvB,CAAC,CAAC;AAEH,MAAM,CAAC,IAAM,GAAG,GAAG,UAAC,EAQnB;;QAPC,0BAAU,EACV,sBAAQ,EACR,oBAAqB,EAArB,0CAAqB,EACrB,cAA0B,EAA1B,6CAA0B;IAK1B,IAAM,YAAY,GAA+C;QAC/D,UAAU,YAAA;QACV,MAAM,QAAA;QACN,cAAc;YACZ,qEAA8C;eAC/C;QACD,UAAU,EAAK,QAAQ,aAAU;KAClC,CAAC;IAEF,IAAI,YAAY,EAAE;QAChB,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;KACxE;IAED,OAAO,oBAAoB,CAAC,YAAY,CAAC,CAAC;IAC1C,mBAAmB;IACnB,4CAA4C;IAC5C,eAAe;IACf,gBAAgB;IAChB,wCAAwC;IACxC,SAAS;IACT,MAAM;IACN,gBAAgB;IAChB,MAAM;AACR,CAAC,CAAC;AAEF,MAAM,CAAC,IAAM,GAAG,GAAG,UAAC,EAIoD;;QAHtE,0BAAU,EACV,sBAAQ,EACR,oCAAe;IAEf,OAAA,oBAAoB,CAAC;QACnB,UAAU,YAAA;QACV,MAAM,mBAAoB;QAC1B,cAAc;YACZ,qEAA8C;eAC/C;QACD,UAAU,EAAK,QAAQ,aAAU;QACjC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;KAC5D,CAAC;AARF,CAQE,CAAC;AAEL,MAAM,CAAC,IAAM,MAAM,GAAG,UAAC,EAAmD;QAAjD,0BAAU,EAAE,sBAAQ;IAC3C,OAAA,GAAG,CAAC;QACF,UAAU,YAAA;QACV,QAAQ,UAAA;QACR,YAAY,EAAE,IAAI;QAClB,MAAM,iBAAmB;KAC1B,CAAC;AALF,CAKE,CAAC;AAEL,MAAM,CAAC,IAAM,YAAY,GAAG,UAAC,EAA2B;;QAAzB,0BAAU;IACvC,OAAA,6BAA6B,CAAC;QAC5B,UAAU,YAAA;QACV,MAAM,iBAAmB;QACzB,cAAc;YACZ,qEAA8C;eAC/C;KACF,CAAC;AANF,CAME,CAAC\"}","code":"import { getFetchDispatcher } from '../request-utils';\r\nimport flat from 'flat';\r\nimport dbopts from '../db/dbopts';\r\nvar dispatchAdminDbFetch = getFetchDispatcher({\r\n    basePath: 'admin/databases',\r\n    allowedQueryParams: [],\r\n});\r\nvar dispatchConfigPropertiesFetch = getFetchDispatcher({\r\n    basePath: 'admin/config_properties',\r\n    allowedQueryParams: [],\r\n});\r\nexport var get = function (_a) {\r\n    var _b;\r\n    var connection = _a.connection, database = _a.database, _c = _a.optionsToGet, optionsToGet = _c === void 0 ? dbopts : _c, _d = _a.method, method = _d === void 0 ? \"PUT\" /* PUT */ : _d;\r\n    var fetchOptions = {\r\n        connection: connection,\r\n        method: method,\r\n        requestHeaders: (_b = {},\r\n            _b[\"Content-Type\" /* CONTENT_TYPE */] = \"application/json\" /* JSON */,\r\n            _b),\r\n        pathSuffix: database + \"/options\",\r\n    };\r\n    if (optionsToGet) {\r\n        fetchOptions.body = JSON.stringify(flat(optionsToGet, { safe: true }));\r\n    }\r\n    return dispatchAdminDbFetch(fetchOptions);\r\n    // .then((res) => {\r\n    //   if (res.status === ResponseStatus.OK) {\r\n    //     return {\r\n    //       ...res,\r\n    //       body: flat.unflatten(res.body),\r\n    //     };\r\n    //   }\r\n    //   return res;\r\n    // });\r\n};\r\nexport var set = function (_a) {\r\n    var _b;\r\n    var connection = _a.connection, database = _a.database, databaseOptions = _a.databaseOptions;\r\n    return dispatchAdminDbFetch({\r\n        connection: connection,\r\n        method: \"POST\" /* POST */,\r\n        requestHeaders: (_b = {},\r\n            _b[\"Content-Type\" /* CONTENT_TYPE */] = \"application/json\" /* JSON */,\r\n            _b),\r\n        pathSuffix: database + \"/options\",\r\n        body: JSON.stringify(flat(databaseOptions, { safe: true })),\r\n    });\r\n};\r\nexport var getAll = function (_a) {\r\n    var connection = _a.connection, database = _a.database;\r\n    return get({\r\n        connection: connection,\r\n        database: database,\r\n        optionsToGet: null,\r\n        method: \"GET\" /* GET */,\r\n    });\r\n};\r\nexport var getAvailable = function (_a) {\r\n    var _b;\r\n    var connection = _a.connection;\r\n    return dispatchConfigPropertiesFetch({\r\n        connection: connection,\r\n        method: \"GET\" /* GET */,\r\n        requestHeaders: (_b = {},\r\n            _b[\"Content-Type\" /* CONTENT_TYPE */] = \"application/json\" /* JSON */,\r\n            _b),\r\n    });\r\n};\r\n//# sourceMappingURL=options.js.map"}
